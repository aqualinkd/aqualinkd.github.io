<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AqualinkD: Open Source Control for Jandy RS Pool Equipment</title>
  <meta name="description" content="Take control of your Jandy RS pool system with AqualinkD, an open-source project for enhanced automation and scheduling.">
  <link rel="preload" href="/fonts/lato-v14-latin-300.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/fonts/lato-v14-latin-700.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/css/style.css?ver=1.1" as="style">
  <link rel="stylesheet" href="/css/style.css?ver=1.1">
  <link rel="icon" type="image/x-icon" href="/img/icon.png">
</head>



<body class="wrap">
  <header id="header"></header>
  <!--<section class="docs">-->
    <section>
    <div class="grid">
      <div id="mobilemenu" class="docs-nav-mobile unit whole show-on-mobiles"><!-- MOBILE MENU HERE --></div>
      <div class="unit four-fifths">
        <article>
          <!--<h3>Complete details are in <a href="https://github.com/aqualinkd/AqualinkD/wiki">AqualinkD wiki</a></h3>-->
          <h3>Configuring WiFi</h3>
          <!-- ADD DETAILS HERE -->
           If you have bought the <b><i>AqualinkD complete kit</i></b>: This comes with everything you need pre built & installed, and is ready to go. 
           You will however need to connect it to your WiFi!<br><br>
           Since this is a complete Linux computer, you will need some way to get your WiFi information on the device, This can be done in one of three ways :-
           <br><br>
           <ul>
            <li class="tightList"><a href="#option1">Connect a USB drive with WiFi information (basic)</a></li>
            -or-
            <li class="tightList"><a href="#option2">Connect a USB drive with WiFi information (advanced WiFi settings)</a></li>
            -or-
            <li class="tightList"><a href="#option3">Radxa kit only - Connect a screen and keyboard to configure WiFi</a></li>
            -or-
            <li class="tightList"><a href="#option4">Connect a USB 2 Ethernet adapter (hardwired to routers/switch ethernet port) to setup WiFi</a></li>
            
            </ul>
        </article>
        &nbsp;
        <article id="option1">
          <h3>Connect a USB drive with WiFi information</h3>
          You will need the following
          <ul class="tightList">
            <li class="tightList">USB stick or equivalent (ie CF card & CF card reader)</li>
            <li class="tightList">USB-C to USB adapter cable (One should be included in the kit)</li>
          </ul>
          <br>
          <b><i>AqualinkD kit's</i></b> comes with software pre-installed that will detect a USB drive when it's inserted, 
          mount it, look for WiFi configuration files, and when found create a WiFi connection.
          <br><br>
          Steps are as follows
          <ol>
          <li>On a computer: Format your USB stick in exFAT or FAT32.</li>
          <li>Download file <a href="/download/nmcli.conf" download><code>nmcli.conf</code></a> and copy it to the USB stick.
          <ul>
            <li>Alternatively, create a plain text file on the USB stick called <code>nmcli.conf</code> <font size="smaller">(if using windows make sure .txt is <b>not</b> added to the file name)</font></li>
          </ul>
           
          <li>Contents of this file should be as below, change the values appropriately for your specific wifi settings</li>
          <!--<pre style="font-size: smaller; background-color: black;">-->
            <p><code class="file">
 SSID="YOUR_SSID"
 PASSWORD="YOUR_PASSWORD" 
          </code></p>
          <!--</pre>-->
          <li>It is important to only change the text inside the quotes YOUR_SSID and YOUR_PASSWORD</li>
            </ul>
          <li>Eject the USB stick from your computer</li>
          <li>Power up Radxa by connecting the RS485 cable and wait a minute for it to fully boot.</li>
          <li>Insert the USB stick (or USB-C to USB cable with USB stick attached) to the USB port on the side of the case</li>
          <li>Wait 10~20 seconds</li>
          <li>Remove the USB stick</li>
          
          </ol>
          If everything worked, your Radxa will now be connected to your wifi network.  
          <br><br>

          <p>The output of the wifi connection will be written to a file called <code>auto-wifi-connect.log</code> on the USB stick.<br> 
          You can view that file for the IP address your router gave out. Or use your routers DHCP page to view the IP.<br>
          <b>Also view this file for any errors IF the WiFi did not connect</b>
          </p>
          <br>
          Now please go to the below in a web browser to see AqualinkD<br>
          <br>
          <code>http://ip.address/</code> or if your device supports mDNS you can use <code><a href="http://aqualinkd.local">http://aqualinkd.local</a></code>
          <br>
          <br>
          <!--
          <hr>
          <div id="Alternate"></div>
          <h2>Case without exposed USB port</h2>
          <ol start="6">
          <li>Remove the Radxa & HAT from the case <a href="#removingcase">details here</a></li>
          <li>Power up Radxa and wait a minute for it to fully boot.</li>
          <ul>
            <li class="tightList">You can use either RS485 <B><I>OR</I></B> USB-C to power the board but NEVER both!</li>
            <li class="tightList">See <a href="#boardlayout">Connector information</a> for USB port to use</li>
          </ul>
          <li>Insert your USB stick into the Radxa USB-C port (2nd port, show link), and wait 10~20 seconds</li>
          <li>Remove the USB stick</li>
          </ol>
          -->
        </article>
        &nbsp;

        <article id="option2">
          <h3>Connect a USB drive with WiFi information advanced WiFi settings</h3>
          If <a href="#option1">option 1</a> does not work, or you have a custom / non-standard WiFi setup, you can use a more advanced configuration file.
          Steps are as follows
          <ol>
          <li>Follow seteps in <a href="#option1">option 1</a>, BUT use a different file for setep #2</li>
          <li>Download file <a href="/download/nmconnection.conf" download><code>nmconnection.conf</code></a> and copy it to the USB stick.
          <li>Modify the file to your specific setup.
            A good reference for this file is <a href="https://networkmanager.dev/docs/api/latest/nm-settings-keyfile.html">here</a>
            <p><code class="file">
 [connection]
  id=preconfigured
  uuid=b2fc09db-af85-4ddd-aa07-a341f99fe10b
  type=wifi

[wifi]
  mode=infrastructure
  ssid=YOUR_SSID  <----- MUST CHANGE
  hidden=false

[ipv4]
  method=auto

[ipv6]
  addr-gen-mode=default
  method=auto

[proxy]

[wifi-security]
  key-mgmt=wpa-psk
  psk=YOUR_PASSWORD <----- MUST CHANGE
          </code></p>
          </li>
          <li>Note the <code>uuid</code> is needed and is simply a unique identifier, you can leave it as is or create you own with <code>cat /proc/sys/kernel/random/uuid</code></li>
          <br>
        </article>
        &nbsp;

        <article id="option3">
          <h3>Radxa kit only - Connect a screen and keyboard</h3>
           <h4>WARNING during these steps you may be using different cables & adapter it is VERY important to:</h4>
           <h3 style="color:red">Never connect the Radxa to both USB power and RS485 power at the same time</h3>
          You will need the following
          <ul class="tightList">
            <li class="tightList">USB Keyboard (USB-C or USB-C adapter)</li>
            <li class="tightList">HDMI Monitor and cable for Micro HDMI(Type-D) to Monitor</li>
          </ul>
        
        &nbsp;
        Steps are same as any Linux computer.
        <ol>
          <li>Remove the Radxa & HAT from the case <a href="#removingcase">details here</a></li>
          <li>Connect Screen and keyboard to Radxa</li>
          <li>Power up Radxa</li>
          <ul>
            <li class="tightList">You can use either RS485 <B><I>OR</I></B> USB-C to power the board but NEVER both!</li>
            <li class="tightList">See <a href="#boardlayout">Connector information</a> for USB port to use</li>
          </ul>
          <li>Login to machine (Default user/password is radxa radxa)</li>
          <li>Run nmcli to list WiFi connection then again to connect</li>
          <ul>
            <li class="tightList"><code>sudo nmcli radio wifi on</code></li>
            <li class="tightList"><code>sudo nmcli device wifi list</code></li>
            <ul><li class="tightList">Make sure your WiFi network is listed.</li></ul>
            <!--<li class="tightList"><code>sudo nmcli device wifi connect "YOUR_SSID" password "YOUR_PASSWORD"</code></li>-->
            <li class="tightList"><code>sudo nmcli device wifi connect "YOUR_SSID" --ask</code></li>
          </ul>
          </ol>
          <div class="quickstart ssh"">
          <!--<div class="code" style="font-size: 10px; display: contents">-->
          <div class="code">
          <p class="title">Radxa-Zero3</p>
            <div class="shell">
              <p class="line">
                <span class="path">~</span>
                <span class="prompt">$</span>
                <span class="command">sudo nmcli radio wifi on</span>
              </p>
              <!--
              <p class="line">
                <span style="white-space: pre;"; class="command">[sudo] password for radxa:</span>
              </p>
              -->
              <p class="line">
                <span class="path">~</span>
                <span class="prompt">$</span>
                <span class="command">sudo nmcli device wifi list</span>
              </p> 
              <p class="line">
                <span style="white-space: pre;"; class="command">IN-USE  BSSID              SSID         MODE   CHAN  RATE        SIGNAL  BARS  SECURITY </span>
              </p> 
              <p class="line">
                <span style="white-space: pre;"; class="command">        7A:81:C2:BC:80:79  YOUR_SSID    Infra  36    270 Mbit/s  100     ▂▄▆█  WPA2    </span>
              </p>
              <p class="line">
                <span style="white-space: pre;"; class="command">        40:EE:00:17:15:E4  another_ssid Infra  6     270 Mbit/s  19      ▂___  WPA2    </span>
              </p>
              <p class="line">
                <span class="path">~</span>
                <span class="prompt">$</span>
                <span class="command"></span>
              </p>
              <p class="line">
                <span class="path">~</span>
                <span class="prompt">$</span>
                <span class="command">sudo nmcli device wifi connect "YOUR_SSID" --ask</span>
              </p>
              <p class="line">
                <span class="path">~</span>
                <span class="prompt">$</span>
                <span class="command">Password:</span>
              </p>
              
            </div>  
          </div>
        </div>          
        </article>
        &nbsp;
        <article id="option4">
          <h3>Connect a USB 2 Ethernet adapter and plug it into your network</h3>
          <h4>Radxa kit</h4>You will need the following
          <ul class="tightList">
            <li class="tightList">USB to Ethernet adapter</li>
            <li class="tightList">Ethernet cable</li>
            <li class="tightList">Computer with a SSH tool</li>
          </ul>

          <ol>
            <li>Remove the Radxa & HAT from the case <a href="#removingcase">details here</a></li>
            <li>Connect the USB to Ethernet adapter to the Radxa</li>
            <li>Power up Radxa</li>
            <ul>
              <li class="tightList">You can use either RS485 <B><I>OR</I></B> USB-C to power the board but NEVER both!</li>
              <li class="tightList">See <a href="#boardlayout">Connector information</a> for USB port to use</li>
            </ul>
            <li>Find the IP address of the radxa from your router (hostname will be aqualinkd)</li>
            <li>Use your SSH tool to SSH to the Radxa IP. Login with user / password</li>
            <li>Follow the <pre>nmcli</pre> commands listed in <a href="#option2">Connect a screen and keyboard to the Radxa</a></li>
          </ol>
          <hr>
          <h4>Raspberry Compute Module kit</h4>You will need the following
          <ul class="tightList">
            <li class="tightList">USB to Ethernet adapter</li>
            <li class="tightList">Ethernet cable</li>
            <li class="tightList">Computer with a SSH tool</li>
            <li class="tightList">A way to power the CM-kit if you can't use RS485 connection. Any 9v to 21v DC PSU will work.</li>
          </ul>
          
          <ol>
            <li>Connect the USB to Ethernet adapter to the Compute Module</li>
            <li>Power up Compute Module, connect power to the + and - on the green terminal block</li>
            <li>Find the IP address of the AqualinkD compute module from your router (hostname will be aqualinkd)</li>
            <li>Use your SSH tool to SSH to the compute module IP. Login with user / password</li>
            <li>Follow the <pre>nmcli</pre> commands listed in <a href="#option2">Connect a screen and keyboard to the Radxa</a></li>
          </ol>
        </article>

        &nbsp;
        <article id="removingcase">
          <h3>Removing the Radxa from the case</h3>
          You will need the following
          <ul class="tightList">
            <li class="tightList">Small phillips screwdiver </li>
          </ul>
          <br>
          Steps
          <ol>
            <li>Remove 4 screws from underside of the case.</li>
            <li>Carefully lift up on case top to remove Radxa & HAT</li>
          </ol>
          <!--<img src="/img/Radxa Exploded2.png"></img>-->
          <!--
          <img src="/img/Radxa Exploded4.png" width="400"></img>
          <img src="/img/Radxa Exploded2.png" width="400"></img>
          <img src="/img/Radxa Exploded.png" width="400"></img>
          <img src="/img/IMG_4882.HEIC"></img>-->
          <div class="align-center">
          <img src="/img/Radxa Exploded.jpg" width="400"></img>
          </div>
        </article>

        &nbsp;
        <article id="boardlayout">
          <h3>Radxa Board Layout / USB Ports</h3>
          <img src="/img/Radxa Zero 2W Ports.png"></img>
           <br><br><br>
            Notes on ports
          <ul class="tightList">
            <li class="tightList">When connecting any USB device (like USB stick / Ethernet Adapter / KEyboard, you can ONLY use the port labeled "USB 3.0 Host Type C port"</li>
            <li class="tightList">You can power the Radxa through the port labeled "USB 2.0 OTG Type C port". <B>NEVER power the board while the RS486 HAT is also connected to the panel</B></li>
          </ul> 
          <img style="background-color:rgb(152, 152, 152);" src="/img/Radxa Board Layout.png"></img>
        </article>
      </div>
      <div id="menu" class="unit one-fifth hide-on-mobiles"><!-- JS WILL ADD MENU HERE --></div>
      <div class="clear"></div>
    </div>
  </section>
  <footer id="footer"></footer>
  <script src="/js/header.js"></script>
  <script src="/js/docsMenu.js"></script>
</body>
</html>